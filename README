asaf.giat,rlvizen
233896309,319132494

TWO MAIN REGULAR EXPRESSIONS

1. Variable Declaration Regex
   (final\s+)?(int|double|boolean|char|String)\s+([a-zA-Z][a-zA-Z0-9_]*|_[a-zA-Z0-9][a-zA-Z0-9_]*)
        (\s*=\s*([^,;]+))?(\s*,\s*([a-zA-Z][a-zA-Z0-9_]*|_[a-zA-Z0-9][a-zA-Z0-9_]*)(\s*=\s*([^,;]+))?)*\s*;

   Capture Groups:
  - Group 1: Final modifier (optional `"final"` plus trailing whitespace)
  - Group 2: Type (`int`, `double`, `boolean`, `char`, or `String`)
  - Group 3: First identifier (first variable name)
  - Group 4: First variable's optional assignment fragment (the whole `= value` part, optional)
  - Group 5: First variable's assignment value (inner capture inside group 4)
  - Group 6: Repeated comma\+variable group (outer repeated group; when repeated it only captures the last repetition)
  - Group 7: Last repeated variable's name (from the repeated group; only last repetition visible)
  - Group 8: Last repeated variable's optional assignment fragment (whole `= value`, optional, from the repeated group)
  - Group 9: Last repeated variable's assignment value (inner capture inside group 8)


2. Method Declaration and Call Regex
   Declaration: void\s+([a-zA-Z][a-zA-Z0-9_]*)\s*\((.*?)\)\s*\{
   - void keyword with required whitespace
   - Method name (starting with letter, containing letters/digits/underscores)
   - Parameter list in parentheses
   - Opening brace

   Call: ([a-zA-Z][a-zA-Z0-9_]*)\s*\((.*?)\)\s*;
   - Method name (starting with letter)
   - Arguments in parentheses
   - Terminating semicolon

   * we didn't include the RegEx for the parameters and arguments here for brevity/

DESIGN CHOICES

Scope Tree Approach:
   By building a complete scope tree structure before validation, we enable forward
   method references. All method signatures are registered in a static global registry
   during the initial parsing phase, allowing methods to call any other method even if
   declared later in the file. Each scope validates its own content and recursively
   validates nested scopes, producing a single-pass validation that stops at the first error.

Preprocessor Rationale:
   The preprocessor handles only file I/O and basic line cleanup (removing comment lines
   starting with // and empty lines), not syntax validation. This separation of concerns
   simplifies validation regex patterns since they don't need to account for comments and
   empty lines. Original line numbers are preserved for accurate error reporting.

RegexManager Centralization:
   All regex patterns and the type compatibility map are defined as static constants in
   RegexManager. This provides a single source of truth for validation patterns, improves
   maintainability, and enables easy updates when patterns need to change. Patterns are
   reused both for identifying line types and validating format.

VariableTable Per Scope:
   Each scope maintains its own VariableTable for variables declared within that scope.
   Variable lookup searches the current scope first, then recursively searches parent
   scopes up the chain. This naturally supports variable shadowing (inner scope variable
   hiding outer scope variable) and enables scope-specific validation while maintaining
   access to variables from enclosing scopes.

MODULE RESPONSIBILITIES

ex5.main:
   - Sjavac: Program entry point with main(String[] args)
   - Validates command-line arguments and calls CodeParser.parse()
   - Outputs result code (0, 1, or 2)
   - SJavaException: Base exception class (message, line number)
   - InvalidFileException: IO errors and invalid file arguments (exit code 2)
   - SyntaxException: Base for syntax/semantic errors (exit code 1)

ex5.preprocessor:
   - CodePreprocessor: Static methods to read file, remove comments and empty lines
   - PreprocessorException: For preprocessing errors (extends SyntaxException)

ex5.parser:
   - CodeParser: Orchestrates preprocessing and scope validation
   - ParserException: For parsing errors like brace mismatches (extends SyntaxException)

ex5.models:
   - ProcessedLine: Cleaned code line with original line number
   - Variable: Represents a variable with type, name, final status, initialization status
   - VariableTable: HashMap-based container for variables in a scope
   - Method: Represents a method declaration with name, parameters, scope reference
   - Statement: Enum for statement types (VAR_DECLARATION, ASSIGNMENT, METHOD_CALL, etc.)

ex5.scope:
   - Scope: Abstract base class for scope hierarchy
     - Contains VariableTable for local variables
     - Parent scope reference for lookup chain
     - Static registry for method signatures
   - GlobalScope: File-level scope, entry point for validation
   - MethodScope: Scope for method body
   - BlockScope: Scope for if/while blocks
   - ScopeException: For scope structure errors (extends SyntaxException)

ex5.validator:
   - RegexManager: Static regex patterns and type compatibility map
   - VariableValidator: Utility methods for variable validation
   - MethodValidator: Utility methods for method validation
   - ControlFlowValidator: Utility methods for condition validation
   - VariableException: Variable-related errors (extends SyntaxException)
   - MethodException: Method-related errors (extends SyntaxException)
   - ConditionException: Control flow condition errors (extends SyntaxException)

